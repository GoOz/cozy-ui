/*------------------------------------*\
    Forms
    =====

    This file contains all needs for forms, inputs, labels...
\*------------------------------------*/

@require '../settings/palette'
@require '../components/button'

checkbox-size = 1rem

$form
    .coz-form
        margin  1em 0 .5em

    .coz-form
    .coz-form-group
        position        relative
        // Managing input width with flex
        display         flex
        flex-direction  column

    .coz-form-desc
        margin-bottom  .5em
        line-height    1.5

    .coz-form-label // Deprecated
        display         block
        text-transform  uppercase
        color           coolGrey
        font-size       .75rem
        padding         .55em 0
        margin-top      1em

    .coz-form-label--error // Deprecated
        display  none
        color    pomegranate

    .coz-form-errors
        color  pomegranate

    a,
    a:visited
        color            dodgerBlue
        text-decoration  none

    a:hover,
    a:active
        text-decoration  underline


$form-button
    .coz-form-controls
        display          flex
        flex-direction   row
        justify-content  flex-end
        margin           1em 0 .5em

        a
        button
        input[type=submit]
            flex    0 0 auto
            margin  0 0 .5em .5em

    .coz-form-controls--full
        a
        button
        input[type=submit]
            flex           0 0 100%
            margin-bottom  .5em

    .coz-form-controls--dispatch
        justify-content  space-between

        a
        button
        input[type=submit]
            flex  0 0 49%
            margin 0 0 .5em

            &:last-child
                margin-left auto


$form-text
    input[type=text]
    input[type=password]
    input[type=email]
    input[type=url]
        display        inline-block
        padding        .9em .75em .75em .9em
        box-sizing     border-box
        border-radius  2px
        border         1px solid silver
        background     white
        color          black

        &::placeholder
            color      coolGrey
            font-size  1rem

        &:focus
            border      1px solid dodgerBlue
            outline     0

        &:hover
            border  1px solid coolGrey

        &.error
            border      1px solid pomegranate


$form-textarea
    textarea
        display        inline-block
        padding        .9em .75em .75em .9em
        box-sizing     border-box
        border-radius  2px
        border         1px solid silver
        background     white
        color          black

        &::placeholder
            color      coolGrey
            font-size  1rem

        &:focus
            border      1px solid dodgerBlue
            outline     0

        &:hover
            border  1px solid coolGrey

        &.error
            border      1px solid pomegranate


$form-select
    select
        display              inline-block
        padding              .75em .75em .9em
        border-radius        4px
        box-sizing           border-box
        border               1px solid silver
        background           white
        color                black
        appearance           none
        background-image     embedurl('../../assets/icons/ui/arrow.svg')
        background-position  right 8px center
        background-repeat    no-repeat

        &::-ms-expand
            display  none

        &::placeholder
            color      slateGrey
            font-size  1.05rem

        &:focus
            border      1px solid dodgerBlue

        &:hover
            border  1px solid coolGrey

        &.error
            border      1px solid pomegranate
            background  none


$form-checkbox
    // To make sure that checkbox's wrapper have the height of the checkbox
    display flex

    input[type=radio]
    input[type=checkbox]
        hide()

    label
        position     relative
        display      inline-block
        width        checkbox-size
        height       checkbox-size
        padding-left checkbox-size * 1.4
        cursor       pointer

        &::before
        &::after
            content     ''
            position    absolute
            left        0
            top         0
            box-sizing  border-box
            width       checkbox-size
            height      checkbox-size

        &::before
            transition  box-shadow 350ms cubic-bezier(0, .89, .44, 1)

        &::after
            transition-duration  .2s
            transition-property  opacity, transform


$form-progress
    progress
        margin         .5em 0
        width          100%
        height         .5em
        color          dodgerBlue
        background     paleGrey
        border         0
        border-radius  1.25rem

        // chrome and safari
        &::-webkit-progress-bar
            background     paleGrey
            border-radius  1.25rem

        &::-webkit-progress-value
            background     charcoalGrey
            border-radius  1.25rem

        // firefox
        &::-moz-progress-bar
            background     charcoalGrey
            border-radius  1.25rem

// New styles
$label
    display block
    text-transform uppercase
    color coolGrey
    font-size .75rem
    padding .55em 0
    margin-top 1em

    &.is-error
        color pomegranate

$input-text
    display inline-block
    width 100%
    max-width 30rem
    padding .8125rem 1rem
    box-sizing border-box
    border-radius .1875rem
    border .0625rem solid silver
    background white
    font-size 1rem
    line-height 1.25
    color black
    outline 0

    &::placeholder
        color coolGrey
        font-size 1rem

    &:focus
        border .0625rem solid dodgerBlue
        outline 0

    &:hover
        border .0625rem solid coolGrey

    &.is-error
    &:invalid
        border .0625rem solid pomegranate

$input-text--tiny
    border-radius .125rem
    padding .225rem .5rem .4rem

$input-text--medium
    border-radius .125rem
    padding .485rem 1rem .64rem

$input-text--fullwidth
    max-width 100%

$checkbox
    // To make sure that checkbox's wrapper have the height of the checkbox
    display flex
    margin-bottom .5rem

    span
        position relative
        display inline-block
        height checkbox-size
        padding-left checkbox-size * 1.4
        line-height 1rem
        cursor pointer

        &::before
        &::after
            content ''
            position absolute
            left 0
            top 0
            box-sizing border-box
            width checkbox-size
            height checkbox-size
            border-radius .125rem

        &::before
            transition box-shadow 350ms cubic-bezier(0, .89, .44, 1)
            box-shadow inset 0 0 0 .125rem alpha(charcoalGrey, .25)
            background-color white

        &:hover::before
            box-shadow inset 0 0 0 .125rem dodgerBlue

        &::after
            background-image embedurl('../../assets/icons/ui/check.svg')
            background-size contain
            transition-duration .2s
            transition-property opacity, transform

    &[aria-checked='mixed'] span::after
            background-image embedurl('../../assets/icons/ui/dash.svg')
            background-size contain

    input
        hide()

        &:checked
            & + span::before
                box-shadow inset 0 0 0 checkbox-size dodgerBlue

            & + span::after
                opacity 1
                transform scale(1)

        &:not(:checked) + span::after
            opacity 0
            transform scale(0)

    &.is-error span
        color pomegranate

        &::before
            box-shadow inset 0 0 0 .125rem pomegranate
            background-color alpha(pomegranate, .25)

$radio
    @extend $checkbox
    span
        &::before
            border-radius 50%

        &::after
            background none
            content 'â€¢'
            color white
            text-align center
            font-size 1rem
            line-height .8125rem



$textarea
    @extend $input-text
    display block
    width 100%
    min-height 7.5rem
    resize vertical

$textarea--tiny
    @extend $input-text--tiny
    min-height 3rem

$textarea--medium
    @extend $input-text--medium
    min-height 5rem

$textarea--fullwidth
    @extend $input-text--fullwidth

$select
    @extend $input-text
    appearance none
    background embedurl('../../assets/icons/ui/icon-bottom-select.svg') right 1.25rem center / .875rem no-repeat

    &::-ms-expand
        display  none

$select--tiny
    @extend $input-text--tiny

$select--medium
    @extend $input-text--medium

$select--fullwidth
    @extend $input-text--fullwidth

$field
    position relative
    display flex
    flex-direction column
    margin .5rem 0 1rem
